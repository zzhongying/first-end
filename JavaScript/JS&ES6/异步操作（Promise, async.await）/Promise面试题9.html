<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    // const promise1 = new Promise((resolve, reject) => {
    //     console.log(1);
    //     console.log(2);
    // });
    // promise1.then(() => {
    //     console.log(3);
    // });
    // console.log(4);


    // 1  2 4    因为promise内部状态一直未发生改变，处于pending状态，所以3不输出

    const promise = new Promise((resolve, reject) => {
        console.log(1);
        setTimeout(() => {
            console.log("timerStart");
            resolve("success");
            console.log("timerEnd");
        }, 0);
        console.log(2);
    });

    promise.then((res) => {
        console.log(res);
    });
    console.log(4);

    // 1 2 4  timerStart timerEnd  success(此时then函数算下一轮的微任务了)
//     代码执行过程如下：
//
// 首先遇到Promise构造函数，会先执行里面的内容，打印1；
//
// 遇到定时器steTimeout，它是一个宏任务，放入宏任务队列；
//
// 继续向下执行，打印出2；
//
// 由于Promise的状态此时还是pending，所以promise.then先不执行；
//
// 继续执行下面的同步任务，打印出4；
//
// 此时微任务队列没有任务，继续执行下一轮宏任务，执行steTimeout；
//
// 首先执行timerStart，然后遇到了resolve，将promise的状态改为resolved且保存结果并将之前的promise.then推入微任务队列，再执行timerEnd；
//
// 执行完这个宏任务，就去执行微任务promise.then，打印出resolve的结果

</script>
</html>