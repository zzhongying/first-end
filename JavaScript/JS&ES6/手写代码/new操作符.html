<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>new操作符</title>
</head>
<body>

</body>
<script>
    function newCreate() {

        // 1.将类数组arguments转为数组，并将第一个参数也就是构造函数shift出来
        let Constructor = [].shift.apply(arguments)
        //也可以写成：
        //let args = [...arguments].slice(1)
        //let Con = [...arguments].shift()
        if(typeof Constructor !=='function'){
            console.log("type error")
            return ;
        }
        // 新建一个对象 用于函数变对象
        let newObj = {};
        let result = null

        // 原型链被赋值为原型对象
        newObj.__proto__ = Constructor.prototype;
        // this 指向新对象,第一个参数表示函数体内this的指向，即fn的this指向newObj
        result = Constructor.apply(newObj, arguments);
        //判断result是否为空，或result是否为object
        let flag = result && (typeof result == "object" || typeof result == "function")
        // 判断函数的返回值类型，如果是值类型，返回创建的对象。如果是引用类型，就返回这个引用类型的对象。
        return flag ? result : newObj

    }


    function myCreate() {
      let Fn = [...arguments].shift()  //构造函数
      let newObj ={}
      let result = null

      newObj.__proto__ = Fn.prototype
      result = Fn.apply(newObj,arguments)

      let flag = result && ( typeof result ==='object' || result === 'function')

      return flag ? result : newObj
    }


</script>
</html>